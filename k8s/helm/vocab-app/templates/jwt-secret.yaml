{{- if .Values.secrets.jwt.createFromHelm }}
---
# JWT Secret - Created from Helm values (local development only)
# WARNING: This secret is created from Helm values
# Only use for local development. Production should use external secret management.
apiVersion: v1
kind: Secret
metadata:
  name: {{ .Values.secrets.jwt.secretName }}
  labels:
    {{- include "vocab-app.labels" . | nindent 4 }}
    app.kubernetes.io/component: jwt-secret
type: Opaque
stringData:
  jwt-access-secret: {{ .Values.secrets.jwt.accessSecret | quote }}
  jwt-refresh-secret: {{ .Values.secrets.jwt.refreshSecret | quote }}
{{- else }}
---
# JWT Secret - Managed externally
# Expected secret name: {{ .Values.secrets.jwt.secretName }}
# Required keys: jwt-access-secret, jwt-refresh-secret
# Each secret must be >= 32 characters
# Create using: jwt-secret-generator-job.yaml (auto-runs on helm install/upgrade)
# Or manually: kubectl create secret generic {{ .Values.secrets.jwt.secretName }} \
#                  --from-literal=jwt-access-secret=<secret> \
#                  --from-literal=jwt-refresh-secret=<secret>
{{- end }}
